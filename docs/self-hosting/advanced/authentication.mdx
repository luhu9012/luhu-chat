# Identity Verification Service

<<<<<<< HEAD
LuhuChat supports configuring external identity verification services for internal use by enterprises/organizations to centrally manage user authorization. Currently, it supports [Auth0][auth0-client-page]. This article will introduce how to configure the identity verification service.

## Configure Identity Verification Service

<Steps>

### Create Auth0 Application

Register and log in to [Auth0][auth0-client-page], click on the "Applications" in the left navigation bar to switch to the application management interface, and click "Create Application" in the upper right corner to create an application.

![](https://github.com/CloudPassenger/lobe-chat/assets/30863298/1b405347-f4c3-4c55-82f6-47116f2210d0)

Fill in the application name you want to display to the organization users, choose any application type, and click "Create".

![](https://github.com/CloudPassenger/lobe-chat/assets/30863298/75c92f85-3ad3-4473-a9c6-e667e28d428d)

After successful creation, click on the corresponding application to enter the application details page, switch to the "Settings" tab, and you can see the corresponding configuration information.

![](https://github.com/CloudPassenger/lobe-chat/assets/30863298/a1ed996b-95ef-4b7d-a50d-b4666eccfecb)

In the application configuration page, you also need to configure Allowed Callback URLs, where you should fill in:

```bash
http(s)://your-domain/api/auth/callback/auth0
```
=======
LobeChat supports the configuration of external identity verification services for internal use within enterprises/organizations to centrally manage user authorization.
>>>>>>> 0b1d4cdbdee0241b3965a4c86ef4bcddb0c3fbd9

Currently supported identity verification services include:

- [Auth0](/en/self-hosting/advanced/sso-providers/auth0)
- [Microsoft Entra ID](/en/self-hosting/advanced/sso-providers/microsoft-entra-id)

<<<<<<< HEAD
### Add Users

Click on the "Users Management" in the left navigation bar to enter the user management interface, where you can create users for your organization to log in to LuhuChat.

![](https://github.com/CloudPassenger/lobe-chat/assets/30863298/3b8127ab-dc4f-4ff9-a4cb-dec3ef0295cc)

### Configure Environment Variables

When deploying LuhuChat, you need to configure the following environment variables:

| Environment Variable | Type | Description |
| --- | --- | --- |
| `ENABLE_OAUTH_SSO` | Required | Enable single sign-on (SSO) for LuhuChat. Set to `1` to enable single sign-on. |
| `NEXTAUTH_SECRET` | Required | Key used to encrypt Auth.js session tokens. You can generate a key using the following command: `openssl rand -base64 32` |
| `AUTH0_CLIENT_ID` | Required | Client ID of the Auth0 application |
| `AUTH0_CLIENT_SECRET` | Required | Client Secret of the Auth0 application |
| `AUTH0_ISSUER` | Required | Domain of the Auth0 application, `https://example.auth0.com` |
| `ACCESS_CODE` | Required | Add a password to access this service. You can set a sufficiently long random password to "disable" access code authorization. |
| `NEXTAUTH_URL` | Optional | The URL is used to specify the callback address for the execution of OAuth authentication in Auth.js. It needs to be set only when the default address is incorrect. `https://example.com/api/auth` |

You can refer to the related variable details at [Environment Variables](/en/self-hosting/environment-variable#auth0).

</Steps>

<Callout>
  After successful deployment, users will be able to authenticate and use LuhuChat using the users
  configured in Auth0.
</Callout>
=======
Click on the links to view the corresponding platform's configuration documentation.
>>>>>>> 0b1d4cdbdee0241b3965a4c86ef4bcddb0c3fbd9

## Advanced Configuration

To simultaneously enable multiple identity verification sources, please set the `SSO_PROVIDERS` environment variable, separating them with commas, for example, `auth0,azure-ad`.

The order corresponds to the display order of the SSO providers.

| SSO Provider       | Value      |
| ------------------ | ---------- |
| Auth0              | `auth0`    |
| Microsoft Entra ID | `azure-ad` |

## Other SSO Providers

<<<<<<< HEAD
<Callout type={'warning'}>
  Configuring social login services by default allows anyone to authenticate, which may lead to
  LuhuChat being abused by external users.
</Callout>
<Callout>
  If you need to restrict login users, be sure to configure a **blocking policy**: After enabling
  the social login option, refer to [this article][auth0-login-actions-manual] to create an Action
  to set up a blocking/allow list.
</Callout>
=======
Please refer to the [NextAuth.js][next-auth-js] documentation and feel free to submit a Pull Request.
>>>>>>> 0b1d4cdbdee0241b3965a4c86ef4bcddb0c3fbd9

[next-auth-js]: https://next-auth.js.org/providers
